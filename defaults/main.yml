# See https://github.com/spotify/docker-gc
docker_gc_install: true
# Docker log options
# See https://docs.docker.com/engine/admin/logging/overview/
docker_log_driver: journald
# Docker ipv6
# See https://docs.docker.com/engine/userguide/networking/default_network/ipv6/
docker_ipv6_enabled: false
docker_ipv6_cidr: "2001:db8:1::/64"
# Selinux
docker_selinux_enabled: false
# Storage options
# Possible values: overlay (default), devicemapper, btrfs (unsupported)
docker_storage_driver: overlay
# Refer to commentaries in ../templates/docker-storage-setup.conf.j2
# or `man lvcreate` for acceptable sizes, and their syntax
docker_volume_name: docker
docker_lvm_data_volume_size: 80%FREE
docker_lvm_data_volume_size_min: 2G
docker_lvm_auto_extend_pool: yes

########

docker_package_source: docker
docker_package: docker-engine

# Docker options
docker_options:
  - "--dns 8.8.8.8"
  - "--log-driver={{ docker_log_driver }}"
  - "--disable-legacy-registry"
  - "{% if docker_selinux_enabled %}--selinux-enabled{% endif %}"

docker_tcp: false
docker_tcp_tls: "{{ docker_tcp }}"

# Docker network options can be provided as a list
docker_network_options:
  - "-H unix:///var/run/docker.sock"
  - "--icc=false" # disable inter-container networking
  - "{% if docker_ipv6_enabled %}--ipv6 --fixed-cidr-v6={{ docker_ipv6_cidr }}{% endif %}"
# - "{% if docker_tcp %}-H tcp://0.0.0.0:2375{% endif %}"
# - "{% if docker_tcp and docker_tcp_tls %}--tlsverify{% endif %}"
# - "{% if docker_tcp and docker_tcp_tls %}--tlscacert=/etc/pki/CA/ca.cert{%- endif %}"
# - "{% if docker_tcp and docker_tcp_tls %}--tlscert={{ host_cert }}{%- endif %}"
# - "{% if docker_tcp and docker_tcp_tls %}--tlskey={{ host_key }}{%- endif %}"

# Just propagate same size that thinprovider use
docker_volume_size: "{{ docker_lvm_data_volume_size }}"
docker_volume_mount: /var/lib/docker
docker_volume_device: "/dev/{{ volume_group_name }}/{{ docker_volume_name }}"
docker_volume_fs_type: "{% if docker_storage_driver == 'btrfs' %}btrfs{% else %}xfs{% endif %}"
docker_volume_fs_opts: "{% if docker_volume_fs_type == 'xfs' %}-i size=512{% endif %}"

docker_role_debug: false
